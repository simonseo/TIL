#반응형 웹디자인의 은밀한 비밀
######John Albin Wilikins 작성 (2012년 7월 16일)
######서명근 번역 (2016년 7월 21일)

본 번역글에는 의역과 편집과 감정과 감탄사가 추가적으로 들어갔습니다. 프론트엔드를 공부한지 1달밖에 안되었기 때문에 전문적인 부분은 간추려서 번역했습니다. 이 점 유의해서 읽어주세요. 

##문제
fluid grid는 완전히 무너졌다...는 과장이고 조금 흠이 있다. [Ethan Marcotte](http://ethanmarcotte.com/)가 말하는 반응형 웹디자인이란 기본적으로 fluid grid, fluid image, media query 3요소다. 이 반응형 웹디자인은 `근사값오차`라는 은밀한 비밀을 가지고 있다. `근사값오차`가 무엇이냐? 그리드의 너비를 퍼센트로 지정해주면 브라우저는 퍼센트를 디바이스 픽셀로 다시 계산해줘야 하는데 이 과정에서 크롬, 사파리 (+WebKit 브라우저), 오페라, 그리고 빠질 수 없는 IE6 & IE7 전부 이 "오류"가 생긴다.

내가 오류에 큰따옴표를 붙인 이유는 CSS 스펙에는 소수 단위 픽셀을 어떻게 처리해야되는지 안 알려주고 있기 때문에 오류가 아니라고도 할 수 있기 때문이다. 6컬럼짜리 그리드가 있다고 쳐보자. 각각은 100% / 6 = 16.6666667%의 너비를 가질 것이다. 그러며 1000픽셀짜리 뷰포트에서는 한 컬럼당 166.666667픽셀을 가지게 될 것이다. 그런데 말했듯이 CSS 스펙에서는 .666667픽셀을 어떻게 처리해야되는지 안 알려준다. 그러니 브라우저들이 마음대로 규칙을 정할 수 밖에 없었는데, 여기서 그냥 반올림을 하게 되면 컬럼당 167픽셀을 가지게 될 것이다. 하지만 167픽셀 x 6 = 1002픽셀로 우리의 뷰포트에는 6컬럼을 모두 담을 수 없게 된다. 다른 방법으로는 내림을 해서 컬럼당 166픽셀을 가지게 하면 우리의 1000픽셀 뷰포트에서 4픽셀이 비게 된다.
![percent](https://www.palantir.net/sites/default/files/styles/blogpost-mainimage/public/blog/images/RWD-Dirty-Secret.png?itok=oUeK9EeZ)
IE6이랑 IE7은 전자의 방법인 반올림을 택했다. 그래서 부모 컨테이너에서 공간이 부족해서 다음 줄로 넘어가고 결과적으로 레이아웃이 깨지는 일이 매우 자주 일어났다. 역시 전설의 레전드... Webkit 브라우저들은 퍼센트를 픽셀로 계산한 후 내림하는 방식을 취했다. 최소한 레이아웃이 깨지는 결과는 피하기 위해서였다. 반면 오페라 브라우저는 16.6666667%라는 값을 16%로 내림한 후에 픽셀로 계산을 했다. 그러면 위의 예시에서는 160픽셀이 되는 것이다. 6.666667픽셀이 통째로 날아갔다고 욕하기 전에 CSS 스펙에서 정답이 뭔지 안 알려줬다는 걸 기억하자.

###그렇게 심각한가?
안타깝게도, 그렇게 심각하다. 특히 거터(gutter)와 패딩(padding)을 퍼센트 단위로 지정해주면 문제는 더 심각해진다. CSS에서 레이아웃을 잡을 때 대개 float 방법을 사용해서 요소를 옆으로 다닥다닥 붙이게 된다. 이 때 각 요소의 위치는 해당 요소보다 먼저 나타난 모든 요소의 크기에 영향을 받는다. 또 예를 들어보자. 12컬럼짜리 그리드가 있는데 마진(margin)과 패딩을 모두 퍼센트 단위로 지정해줬다고 쳐보자. 그러면 12번째 컬럼에 있는 요소는 첫번째부터 11번째 컬럼까지의 모든 `margin-left`, `padding-left`, `width`, `padding-right`, `margin-right`의 값에 영향을 받는 것이다. 게다가 12번째 컬럼 자체가 가지고 있는 `margin-left`값까지 고려하면, 이론적으로는 최대 56픽셀의 오차가 생길 수 있는 것이다!! 이런 흉악한... 어쩐지 [트위터에서](http://twitter.com/mortendk/status/207091318101508096) [프론트엔드 개발자들이 욕하고 있더라.](http://twitter.com/mortendk/status/207372492996755456)

이 충격적인 현상을 놓고 보면 미디어쿼리의 반응형 웹디자인 예제에 "box" wrapping design이 거의 없는게 이해가 간다. 그런 디자인을 쓰면 저 오차가 잘보일 테니까 말이다.

이 오차를 직접 눈으로 확인해보고 싶으면 여기 [10컬럼짜리 예시](http://johnalbin.github.com/fluid-grid-rounding-errors/)을 보자. 어떤 브라우저에서 문제가 발생하는지 스크린샷도 찍어놓았다.

##이 %%%같은 문제를 어떻게 해결하지?
들어가기 전에 일단 어답티브(적응형) 웹디자인 진영의 여러분께서 "나 알아!! 나 알아!!"하며 소리지르는게 들리니까 말하겠습니다. 반응형 대신 적응형 웹디자인으로 접근하는 것도 당연해보이는 해결방법이다. 적응형 웹디자인은 fluid grid를 사용하지 않기 때문에 fluid grid에서 발생하는 이 근사값오차로부터 자유롭다. 적응형 디자인에서는 몇개의 뷰포트 너비를 정해서 디자인을 하고, 정해놓은 뷰포트 크기와 유저의 뷰포트 크기가 다르면 유저의 뷰포트 너비에 가까운 것의 디자인을 적용하면 된다. 반응형이랑 적응형 둘 다 장단점이 있으니 이 얘기로 깊이 들어가지는 않겠지만, 적응형 디자인도 타당한 해결법은 되겠다.

###1. 최고의 해결책
위에 이 문제가 발생하는 브라우저 목록에 파이어폭스가 없다는 걸 눈치챘을 것이다. 파이어폭스는 sub-pixel rendering이라는 창의적인 해결방법을 제시했다. 모든 픽셀값을 반올림하는 대신, 소숫점 이하 (sub-pixel)의 픽셀값만 따로 모아두었다가 요소의 위치를 잡는데 이전 요소들의 값이 필요할 때 잠깐잠깐 꺼내쓰는 방식이다. 이걸 실제로 보면 다른 방법들보다 훨씬 깔끔하고 디자이너가 생각했던 것과 가장 비슷하게 나온다.

IE8에도 과오로부터 벗어나기 위해 sub-pixel rendering 기법을 채택했다. 내림 기법을 사용하는 WebKit과 오페라 브라우저는 아직 sub-pixel rendering 기법을 채택하지 않았다. (역자 주: 2016년 기준 대부분의 브라우저에서는 이 방법을 채택한 것으로 보인다. )

![2016년 기준 맥에서 크롬, 파이어폭스, 사파리](https://github.com/yamoo9/FDS/raw/master/Assets/sub-pixel-2016-mac.jpg)
![2016년 기준 윈도우에서 파이폭스, 크롬, IE]